Turbo Assembler	 Version 4.1	    02/15/26 23:52:40	    Page 1
frame.asm



      1	0000			     .model tiny
      2	0000			     .code
      3
      4				     locals @@
      5				     org 100h
      6
      7	0100			     Start:
      8
      9	0100  E8 0223		     main:	     call initRegs
     10	0103  FC				     cld
     11
     12	0104  E8 022D				     call printfMessage
     13	0107  E8 02BB				     call printfFrame
     14
     15	010A  B8 4C00				     mov ax, 4c00h
     16	010D  CD 21				     int 21h
     17
     18
     19
     20	010F			     hashSymbolStrlen	     proc
     21
     22	010F  32 D2					     xor dl, dl
     23	0111  AC		     continue:		     lodsb
     24
     25
     26	0112  3C 23					     cmp al, '#'
     27	0114  74 08					     je	endOfString
     28	0116  3C 0D					     cmp al, 0Dh
     29	0118  74 04					     je	 endOfString
     30
     31	011A  FE C2					     inc dl
     32	011C  EB F3					     jmp continue
     33
     34	011E  C3		     endOfString:	     ret
     35	011F			     hashSymbolStrlen	     endp
     36				     ;----------------------------------------------------------------------------------------------
     37				     ; Counts the number of characters from the	starting address to the	first '#' character
     38				     ;Entry: si	= string start address
     39				     ;Exit:  dl	= the number of	characters from	the starting address to	the first '#' character
     40				     ;Expected:	direction flag = 0
     41				     ;Destroyed: al, si, dl
     42				     ;----------------------------------------------------------------------------------------------
     43
     44
     45	011F			     getMessageParams	   proc
     46
     47							   ;mov	cl, al
     48
     49	011F  33 DB					   xor bx, bx
     50
     51	0121  E8 FFEB		     @@getNumOfStrings:	   call	hashSymbolStrlen
     52	0124  2A CA					   sub cl, dl
     53
     54	0126  80 F9 00					   cmp cl, 0
     55	0129  74 02					   je @@countIsZero
     56	012B  FE C9					   dec cl
     57	012D  FE C6		     @@countIsZero:	   inc dh
Turbo Assembler	 Version 4.1	    02/15/26 23:52:40	    Page 2
frame.asm



     58
     59	012F  3A DA					   cmp bl, dl
     60	0131  77 02					   ja  @@shortString
     61	0133  8A DA					   mov bl, dl
     62	0135  32 D2		     @@shortString:	   xor dl, dl
     63	0137  83 F9 00					   cmp cx, 0
     64	013A  75 E5		     @@notNewString:	   jne @@getNumOfStrings
     65
     66							 ;inc dh
     67
     68	013C  3A D3					 cmp dl, bl
     69	013E  77 02					 ja alreadyMaxLen
     70	0140  8A D3					 mov dl, bl
     71
     72	0142  C3		     alreadyMaxLen:	 ret
     73	0143			     getMessageParams	 endp
     74				     ;----------------------------------------------------------------------------------------------
     75				     ; Gets the	number of strings in a command line message and	the maximum length of those strings.
     76				     ;Entry: si	= command line message start address
     77				     ;	     cl	= command line message length
     78				     ;Exit:  dh	= the number of	strings	in a command line
     79				     ;	     dl	= the maximum length of	command	line message strings
     80				     ;Expected:
     81				     ;Destroyed: si, al, cx, bx, dx
     82				     ;----------------------------------------------------------------------------------------------
     83
     84	0143			     getVideoMemoryVerticalOffset	 proc
     85	0143  33 C0							 xor ax, ax
     86
     87	0145  BB 0019							 mov bx, 25
     88	0148  8A C6							 mov al, dh
     89	014A  98							 cbw
     90	014B  2B D8							 sub bx, ax
     91	014D  D1 EB							 shr bx, 1
     92	014F  B8 00A0							 mov ax, 160
     93	0152  52							 push dx
     94	0153  F7 E3							 mul bx
     95	0155  5A							 pop dx
     96	0156  8B D8							 mov bx, ax
     97
     98	0158  C3							 ret
     99	0159			     getVideoMemoryVerticalOffset	 endp
    100				     ;----------------------------------------------------------------------------------------------
    101				     ;Gets video memory	vertical position offset depending on the number of lines
    102				     ;in the command line message.
    103				     ;Entry: dh	= the number of	lines in the command line message.
    104				     ;Exit:  bx	= video	memory vertical	position offset
    105				     ;Expected:
    106				     ;Destroyed: ax, bx
    107				     ;----------------------------------------------------------------------------------------------
    108
    109	0159			     printfCentredString	 proc
    110
    111	0159  55						 push bp
    112	015A  8B EC						 mov bp, sp
    113
    114	015C  8B 76 04						 mov si, [bp+4]
Turbo Assembler	 Version 4.1	    02/15/26 23:52:40	    Page 3
frame.asm



    115	015F  8B 5E 06						 mov bx, [bp+6]
    116
    117	0162  33 FF						 xor di, di
    118
    119	0164  52						 push dx
    120	0165  E8 FFA7						 call hashSymbolStrlen
    121
    122	0168  8A C2						 mov al, dl
    123	016A  98						 cbw
    124	016B  8B F8						 mov di, ax
    125	016D  5A						 pop dx
    126
    127	016E  51						 push cx
    128	016F  8A C8						 mov cl, al
    129
    130	0171  2B F7						 sub si, di
    131	0173  4E						 dec si
    132
    133	0174  B8 0050						 mov ax, 80
    134	0177  2B C7						 sub ax, di
    135	0179  D1 E8						 shr ax, 1
    136	017B  D1 E0						 shl ax, 1
    137	017D  03 D8						 add bx, ax
    138
    139	017F  D1 E7						 shl di, 1
    140	0181  03 F8						 add di, ax
    141
    142	0183  56						 push si
    143	0184  51						 push cx
    144	0185  53						 push bx
    145	0186  E8 000B						 call myPuts
    146	0189  59						 pop cx
    147
    148	018A  2B DF						 sub bx, di
    149	018C  33 FF						 xor di, di
    150
    151	018E  8B C6						 mov ax, si
    152	0190  8B E5						 mov sp, bp
    153	0192  5D						 pop bp
    154	0193  C3						 ret
    155	0194			     printfCentredString	 endp
    156				     ;----------------------------------------------------------------------------------------------
    157				     ;Prints a string in the center of video memory line
    158				     ;Entry: [bp+4] = start address of the string
    159				     ;	     [bp+6] = video memory position offset
    160				     ;Exit:  ax	= end address of the string
    161				     ;Expected:	direction flag = 0, bx must be a multiple of 80d*2
    162				     ;Destroyed: di, ax, si
    163				     ;----------------------------------------------------------------------------------------------
    164
    165
    166	0194			     myPuts		 proc
    167	0194  55					 push bp
    168	0195  8B EC					 mov bp, sp
    169
    170	0197  8B 76 08					 mov si, [bp+8]
    171	019A  8B 4E 06					 mov cx, [bp+6]
Turbo Assembler	 Version 4.1	    02/15/26 23:52:40	    Page 4
frame.asm



    172	019D  8B 5E 04					 mov bx, [bp+4]
    173
    174	01A0  AC		     @@next:		 lodsb
    175	01A1  26: 88 07					 mov es:[bx], al
    176	01A4  83 C3 02					 add bx, 2
    177	01A7  E2 F7					 loop @@next
    178
    179	01A9  8B E5					 mov sp, bp
    180	01AB  5D					 pop bp
    181	01AC  C2 0006					 ret 6
    182	01AF			     myPuts		 endp
    183				     ;----------------------------------------------------------------------------------------------
    184				     ;Prints a string of a given length
    185				     ;Entry: [bp+8] = start address of the string
    186				     ;	     [bp+6] = length of	the string
    187				     ;	     [bp+4] = video memory vertical position offset
    188				     ;Exit
    189				     ;Expected:	direction flag = 0
    190				     ;Destroyed: si, bx, al, cx
    191				     ;----------------------------------------------------------------------------------------------
    192
    193	01AF			     putCommandLineMessage	     proc
    194	01AF  E8 FF91						     call getVideoMemoryVerticalOffset
    195
    196	01B2  53		     @@nextStr:			     push bx
    197	01B3  56						     push si
    198
    199	01B4  E8 FFA2						     call printfCentredString
    200	01B7  5E						     pop si
    201	01B8  5B						     pop bx
    202
    203	01B9  8B F0						     mov si, ax
    204	01BB  46						     inc si
    205
    206	01BC  81 C3 00A0					     add bx, 80*2
    207	01C0  E2 F0						     loop @@nextStr
    208
    209	01C2  C3						     ret
    210	01C3			     putCommandLineMessage	      endp
    211				     ;----------------------------------------------------------------------------------------------
    212				     ;Prints a centered	command	line message
    213				     ;Entry: si	= start	address	of the message
    214				     ;	     cx	= number of message lines
    215				     ;	     bx	= video	memory vertical	position offset
    216				     ;Exit
    217				     ;Expected:	direction flag = 0, bx must be a multiple of 80d*2
    218				     ;Destroyed: ax, bx, cx, si, di
    219				     ;----------------------------------------------------------------------------------------------
    220
    221	01C3			     getFrameVideoMemoryOffset	     proc
    222
    223	01C3  BF 0019						     mov di, 25
    224	01C6  8A C6						     mov al, dh
    225	01C8  98						     cbw
    226	01C9  2B F8						     sub di, ax
    227	01CB  D1 EF						     shr di, 1
    228	01CD  83 EF 03						     sub di, 3d
Turbo Assembler	 Version 4.1	    02/15/26 23:52:40	    Page 5
frame.asm



    229	01D0  B8 00A0						     mov ax, 160
    230	01D3  52						     push dx
    231	01D4  F7 E7						     mul di
    232	01D6  5A						     pop dx
    233	01D7  8B F8						     mov di, ax
    234
    235	01D9  33 C0						     xor ax, ax
    236	01DB  8A C2						     mov al, dl
    237	01DD  98						     cbw
    238
    239	01DE  BB 0050						     mov bx, 80
    240	01E1  2B D8						     sub bx, ax
    241	01E3  83 EB 06						     sub bx, 6d
    242	01E6  D1 EB						     shr bx, 1
    243	01E8  D1 E3						     shl bx, 1
    244	01EA  03 FB						     add di, bx
    245
    246	01EC  C3						     ret
    247	01ED			     getFrameVideoMemoryOffset	     endp
    248				     ;----------------------------------------------------------------------------------------------
    249				     ;Gets a video memory offset for frame background depending
    250				     ;on the number of lines and their length in the message
    251				     ;Entry: dh	= the number of	lines in the message
    252				     ;	     dl	= max length of	the string in the message
    253				     ;Exit:  di	= video	memory offset for frame	background
    254				     ;Expected:
    255				     ;Destroyed: ax, bx, di
    256				     ;----------------------------------------------------------------------------------------------
    257
    258	01ED			     printfFrameBackgroundString	 proc
    259
    260	01ED  26: 88 45	01	     @@printfByte:			 mov byte ptr es:[di+1], al
    261	01F1  83 C7 02							 add di, 2
    262	01F4  E2 F7							 loop @@printfByte
    263
    264	01F6  C3							 ret
    265	01F7			     printfFrameBackgroundString	 endp
    266				     ;----------------------------------------------------------------------------------------------
    267				     ;Prints frameBackground string a certain of color
    268				     ;Entry: di	= starting address of the string
    269				     ;	     al	= frame	color binary code
    270				     ;	     cl	= length of the	string
    271				     ;Exit:
    272				     ;Expected:	es contains the	address	of the video memory segment.
    273				     ;Destroyed: di, cl
    274				     ;----------------------------------------------------------------------------------------------
    275
    276	01F7			     printfFrameBackground	      proc
    277	01F7  50						     push ax
    278	01F8  E8 FFC8						     call getFrameVideoMemoryOffset
    279	01FB  58						     pop ax
    280
    281	01FC  33 DB						     xor bx, bx
    282	01FE  8A DE						     mov bl, dh
    283	0200  80 C3 06						     add bl, 6
    284
    285	0203  33 C9		     printfFrameStr:		     xor cx, cx
Turbo Assembler	 Version 4.1	    02/15/26 23:52:40	    Page 6
frame.asm



    286	0205  8A CA						     mov cl, dl
    287	0207  80 C1 06						     add cl, 6
    288
    289	020A  E8 FFE0						     call printfFrameBackgroundString
    290
    291	020D  81 C7 00A0					     add di, 160d
    292
    293	0211  50						     push ax
    294	0212  33 C0						     xor ax, ax
    295	0214  8A C2						     mov al, dl
    296	0216  98						     cbw
    297	0217  D1 E0						     shl ax, 1
    298	0219  2B F8						     sub di, ax
    299	021B  83 EF 0C						     sub di, 12
    300	021E  58						     pop ax
    301
    302	021F  FE CB						     dec bl
    303	0221  80 FB 00						     cmp bl, 0
    304	0224  75 DD						     jne printfFrameStr
    305
    306	0226  C3						     ret
    307	0227			     printfFrameBackground	      endp
    308				     ;----------------------------------------------------------------------------------------------
    309				     ;Prints frame centered frame background depending
    310				     ;on the number of lines and their length in the message
    311				     ;Entry: dh	= the number of	lines in the message
    312				     ;	     dl	= max length of	the string in the message
    313				     ;	     al	= frame	color binary code
    314				     ;Exit:
    315				     ;Expected:
    316				     ;Destroyed: bx, di, cl
    317				     ;----------------------------------------------------------------------------------------------
    318
    319	0227			     printHorizontalString   proc
    320	0227  BB 0002					     mov bx, 2
    321	022A  80 FC 00					     cmp ah, 0
    322	022D  74 02					     je	@@nextElem
    323	022F  F7 DB					     neg bx
    324
    325	0231  26: 88 05		     @@nextElem:	     mov byte ptr es:[di], al
    326	0234  03 FB					     add di, bx
    327	0236  E2 F9					     loop @@nextElem
    328
    329	0238  C3					     ret
    330
    331	0239			     printHorizontalString   endp
    332				     ;----------------------------------------------------------------------------------------------
    333				     ;Prints horizontal	string
    334				     ;Entry: al	= symbol binary	code
    335				     ;	     ah	= direction flag (a = 0, di += 2; a != 0, di -=	2)
    336				     ;	     di	= video	memory offset
    337				     ;	     cx	= length of string
    338				     ;Exit:
    339				     ;Expected:	es contains the	address	of the video memory segment.
    340				     ;Destroyed: cx, bx
    341				     ;----------------------------------------------------------------------------------------------
    342
Turbo Assembler	 Version 4.1	    02/15/26 23:52:40	    Page 7
frame.asm



    343	0239			     printVerticalString     proc
    344	0239  BB 00A0					     mov bx, 80d*2
    345	023C  80 FC 00					     cmp ah, 0
    346	023F  74 02					     je	@@nextElem
    347	0241  F7 DB					     neg bx
    348
    349	0243  26: 88 05		     @@nextElem:	     mov byte ptr es:[di], al
    350	0246  03 FB					     add di, bx
    351	0248  E2 F9					     loop @@nextElem
    352
    353	024A  C3					     ret
    354
    355	024B			     printVerticalString     endp
    356				     ;----------------------------------------------------------------------------------------------
    357				     ;Prints vertical string
    358				     ;Entry: al	= symbol binary	code
    359				     ;	     ah	= direction flag (a = 0, di += 2; a != 0, di -=	2)
    360				     ;	     di	= video	memory offset
    361				     ;	     cx	= length of string
    362				     ;Exit:
    363				     ;Expected:	es contains the	address	of the video memory segment.
    364				     ;Destroyed: cx, bx
    365				     ;----------------------------------------------------------------------------------------------
    366
    367	024B			     printfFrameForeground	     proc
    368	024B  BE 0082						     mov si, 82h
    369	024E  AC						     lodsb
    370	024F  8A E0						     mov ah, al
    371
    372	0251  81 EF 0140					     sub di, 160*2
    373								     ;mov al, dl
    374								     ;cbw
    375	0255  83 C7 02						     add di, 2
    376
    377	0258  B0 C8						     mov al, 0C8h
    378	025A  80 FC 30						     cmp ah, 30h
    379	025D  75 04						     jne @@simpleChoice1
    380	025F  BE 008A						     mov si, 8Ah
    381	0262  AC						     lodsb
    382	0263  26: 88 05		     @@simpleChoice1:		     mov byte ptr es:[di], al
    383
    384	0266  83 C7 02						     add di, 2
    385
    386	0269  33 C9						     xor cx, cx
    387	026B  8A CA						     mov cl, dl
    388	026D  80 C1 02						     add cl, 2
    389
    390	0270  B0 CD						     mov al, 0CDh
    391	0272  80 FC 30						     cmp ah, 30h
    392	0275  75 04						     jne @@simpleChoice2
    393	0277  BE 008B						     mov si, 8Bh
    394	027A  AC						     lodsb
    395
    396	027B  50		     @@simpleChoice2:		     push ax
    397	027C  B4 00						     mov ah, 0
    398	027E  E8 FFA6						     call printHorizontalString
    399	0281  58						     pop ax
Turbo Assembler	 Version 4.1	    02/15/26 23:52:40	    Page 8
frame.asm



    400
    401	0282  B0 BC						     mov al, 0BCh
    402	0284  80 FC 30						     cmp ah, 30h
    403	0287  75 04						     jne @@simpleChoice3
    404	0289  BE 008C						     mov si, 8Ch
    405	028C  AC						     lodsb
    406	028D  26: 88 05		     @@simpleChoice3:		     mov byte ptr es:[di], al
    407
    408	0290  8A C6						     mov al, dh
    409	0292  04 03						     add al, 3
    410	0294  50						     push ax
    411	0295  98						     cbw
    412	0296  BB 00A0						     mov bx, 160d
    413	0299  52						     push dx
    414	029A  F7 E3						     mul bx
    415	029C  5A						     pop dx
    416	029D  2B F8						     sub di, ax
    417	029F  58						     pop ax
    418
    419	02A0  B0 BB						     mov al, 0BBh
    420	02A2  80 FC 30						     cmp ah, 30h
    421	02A5  75 04						     jne @@simpleChoice4
    422	02A7  BE 0086						     mov si, 86h
    423	02AA  AC						     lodsb
    424	02AB  26: 88 05		     @@simpleChoice4:		     mov byte ptr es:[di], al
    425
    426	02AE  83 EF 02						     sub di, 2
    427
    428	02B1  33 C9						     xor cx, cx
    429	02B3  8A CA						     mov cl, dl
    430	02B5  80 C1 02						     add cl, 2
    431	02B8  B0 CD						     mov al, 0CDh
    432	02BA  80 FC 30						     cmp ah, 30h
    433	02BD  75 04						     jne @@simpleChoice5
    434	02BF  BE 0085						     mov si, 85h
    435	02C2  AC						     lodsb
    436
    437	02C3  50		     @@simpleChoice5:		     push ax
    438	02C4  B4 01						     mov ah, 1
    439	02C6  E8 FF5E						     call printHorizontalString
    440	02C9  58						     pop ax
    441
    442	02CA  B0 C9						     mov al, 0C9h
    443	02CC  80 FC 30						     cmp ah, 30h
    444	02CF  75 04						     jne @@simpleChoice6
    445	02D1  BE 0084						     mov si, 84h
    446	02D4  AC						     lodsb
    447	02D5  26: 88 05		     @@simpleChoice6:		     mov byte ptr es:[di], al
    448	02D8  81 C7 00A0					     add di, 80d*2
    449
    450	02DC  8A CE						     mov cl, dh
    451	02DE  80 C1 02						     add cl, 2
    452	02E1  B0 BA						     mov al, 0BAh
    453	02E3  80 FC 30						     cmp ah, 30h
    454	02E6  75 04						     jne @@simpleChoice7
    455	02E8  BE 0087						     mov si, 87h
    456	02EB  AC						     lodsb
Turbo Assembler	 Version 4.1	    02/15/26 23:52:40	    Page 9
frame.asm



    457
    458	02EC  50		     @@simpleChoice7:		     push ax
    459	02ED  B4 00						     mov ah, 0
    460	02EF  E8 FF47						     call printVerticalString
    461	02F2  58						     pop ax
    462
    463	02F3  81 EF 00A0					     sub di, 80d*2
    464
    465	02F7  50						     push ax
    466	02F8  8A C2						     mov al, dl
    467	02FA  04 03						     add al, 3
    468	02FC  98						     cbw
    469	02FD  D1 E0						     shl ax, 1
    470	02FF  03 F8						     add di, ax
    471	0301  58						     pop ax
    472
    473	0302  8A CE						     mov cl, dh
    474	0304  80 C1 02						     add cl, 2
    475	0307  B0 BA						     mov al, 0BAh
    476	0309  80 FC 30						     cmp ah, 30h
    477	030C  75 04						     jne @@simpleChoice8
    478	030E  BE 0089						     mov si, 89h
    479	0311  AC						     lodsb
    480
    481	0312  50		     @@simpleChoice8:		     push ax
    482	0313  B4 01						     mov ah, 1
    483	0315  E8 FF21						     call printVerticalString
    484	0318  58						     pop ax
    485
    486	0319  80 FC 30						     cmp ah, 30h
    487	031C  75 07						     jne @@end
    488	031E  81 C7 00A0					     add di, 2*80d
    489	0322  E8 0036						     call printInternalFrame
    490
    491	0325  C3		     @@end:			     ret
    492	0326			     printfFrameForeground	     endp
    493				     ;----------------------------------------------------------------------------------------------
    494				     ;Prints centered frame foreground depending
    495				     ;on the number of lines and their length in the message
    496				     ;Entry: dh	= the number of	lines in the message
    497				     ;	     dl	= max length of	the string in the message
    498				     ;	     di	= video	memory offset of the lower right corner	of the frame
    499				     ;Exit:
    500				     ;Expected:	es contains the	address	of the video memory segment.
    501				     ;Destroyed: ax, bx, cx, si, di
    502				     ;----------------------------------------------------------------------------------------------
    503
    504	0326			     initRegs		     proc
    505	0326  B8 B800					     mov ax, 0b800h
    506	0329  8E C0					     mov es, ax
    507
    508	032B  33 C0					     xor ax, ax
    509	032D  33 DB					     xor bx, bx
    510	032F  33 C9					     xor cx, cx
    511	0331  33 D2					     xor dx, dx
    512
    513	0333  C3					     ret
Turbo Assembler	 Version 4.1	    02/15/26 23:52:40	    Page 10
frame.asm



    514	0334			     initRegs		     endp
    515				     ;----------------------------------------------------------------------------------------------
    516				     ;Inits regs.
    517				     ;Entry:
    518				     ;Exit:
    519				     ;Expected:
    520				     ;Destroyed: ax, bx, cx, dx, es
    521				     ;----------------------------------------------------------------------------------------------
    522
    523	0334			     printfMessage	     proc
    524
    525	0334  BE 0080					     mov si, 80h
    526	0337  AC					     lodsb
    527
    528	0338  8A C8					     mov cl, al
    529
    530	033A  BE 0082					     mov si, 82h
    531	033D  AC					     lodsb
    532
    533	033E  46					     inc si
    534	033F  80 E9 03					     sub cl, 3
    535
    536	0342  2C 30					     sub al, 30h
    537	0344  3C 00					     cmp al, 0
    538	0346  75 06					     jne @@simpleMode
    539	0348  83 C6 0D					     add si, 13d	     ;;
    540	034B  80 E9 0D					     sub cl, 13d	     ;;changes
    541
    542	034E  56		     @@simpleMode:	     push si
    543	034F  E8 FDCD					     call getMessageParams
    544	0352  5E					     pop si
    545
    546	0353  8A CE					     mov cl, dh
    547	0355  32 ED					     xor ch, ch
    548
    549	0357  E8 FE55					     call putCommandLineMessage
    550	035A  C3					     ret
    551
    552	035B			     printfMessage	     endp
    553				     ;----------------------------------------------------------------------------------------------
    554				     ;Ð¡alculates position and prints a	centered command line message
    555				     ;Entry:
    556				     ;Exit:
    557				     ;Expected:	direction flag = 0, es contains	the address of the video memory	segment.
    558				     ;Destroyed: ax, bx, cx, si
    559				     ;----------------------------------------------------------------------------------------------
    560
    561	035B			     printInternalFrame		     proc
    562
    563	035B  BE 0088						     mov si, 88h
    564	035E  AC						     lodsb
    565
    566	035F  83 EF 02						     sub di, 2
    567	0362  8A CA						     mov cl, dl
    568	0364  80 C1 02						     add cl, 2
    569	0367  B4 01						     mov ah, 1
    570	0369  E8 FEBB						     call printHorizontalString
Turbo Assembler	 Version 4.1	    02/15/26 23:52:40	    Page 11
frame.asm



    571
    572	036C  83 C7 02						     add di, 2
    573	036F  8A CE						     mov cl, dh
    574	0371  80 C1 02						     add cl, 2
    575	0374  B4 00						     mov ah, 0
    576	0376  E8 FEC0						     call printVerticalString
    577
    578	0379  81 EF 00A0					     sub di, 2*80d
    579	037D  8A CA						     mov cl, dl
    580	037F  80 C1 02						     add cl, 2
    581	0382  B4 00						     mov ah, 0
    582	0384  E8 FEA0						     call printHorizontalString
    583
    584	0387  83 EF 02						     sub di, 2
    585	038A  8A CE						     mov cl, dh
    586	038C  80 C1 02						     add cl, 2
    587	038F  B4 01						     mov ah, 1
    588	0391  E8 FEA5						     call printVerticalString
    589
    590	0394  C3						     ret
    591	0395			     printInternalFrame		     endp
    592				     ;----------------------------------------------------------------------------------------------
    593				     ;Prints centered internal frame foreground	depending
    594				     ;on the number of lines and their length in the message
    595				     ;Entry: dh	= the number of	lines in the message
    596				     ;	     dl	= max length of	the string in the message
    597				     ;	     di	= video	memory offset of the upper right corner	of the frame
    598				     ;Exit:
    599				     ;Expected:	es contains the	address	of the video memory segment.
    600				     ;Destroyed: ax, cx, si, di
    601				     ;----------------------------------------------------------------------------------------------
    602
    603	0395			     getFrameColor	     proc
    604	0395  B0 70					     mov al, 01110000b
    605	0397  BE 0082					     mov si, 82h
    606	039A  8A 1C					     mov bl, [si]
    607	039C  80 FB 30					     cmp bl, 30h
    608	039F  75 23					     jne @@end
    609
    610	03A1  BE 008E					     mov si, 8Eh
    611	03A4  AC					     lodsb
    612	03A5  2C 30					     sub al, 30h
    613	03A7  3C 0A					     cmp al, 10d
    614	03A9  72 02					     jb	@@less10_1
    615	03AB  2C 07					     sub al, 7d
    616	03AD  D0 E0 D0 E0 D0 E0	D0+  @@less10_1:	     shl al, 4
    617	      E0
    618
    619	03B5  8A 1C					     mov bl, [si]
    620	03B7  80 EB 30					     sub bl, 30h
    621	03BA  80 FB 0A					     cmp bl, 10d
    622	03BD  72 03					     jb	@@less10_2
    623	03BF  80 EB 07					     sub bl, 7d
    624	03C2  02 C3		     @@less10_2:	     add al, bl
    625
    626	03C4  C3		     @@end:		     ret
    627	03C5			     getFrameColor	     endp
Turbo Assembler	 Version 4.1	    02/15/26 23:52:40	    Page 12
frame.asm



    628				     ;----------------------------------------------------------------------------------------------
    629				     ;Gets the color attribute of the frame depending on the selected mode
    630				     ;Entry:
    631				     ;Exit:  al	= color	attribute of the frame
    632				     ;Expected:	 [82h] = frame mode
    633				     ;		 [8Eh] and [8Fh] = hex color code
    634				     ;Destroyed: al, bl, si
    635				     ;----------------------------------------------------------------------------------------------
    636
    637	03C5			     printfFrame	     proc
    638	03C5  E8 FFCD					     call getFrameColor
    639
    640	03C8  E8 FE2C					     call printfFrameBackground
    641
    642	03CB  E8 FE7D					     call printfFrameForeground
    643	03CE  C3					     ret
    644
    645	03CF			     printfFrame	     endp
    646				     ;----------------------------------------------------------------------------------------------
    647				     ;Prints a centered	frame.
    648				     ;Entry: dh	= the number of	lines in the message
    649				     ;	     dl	= max length of	the string in the message
    650				     ;Exit:
    651				     ;Expected:	direction flag = 0, es contains	the address of the video memory	segment,
    652				     ;		[82h] =	frame mode.
    653				     ;Destroyed: ax, bx, cx, si, di
    654				     ;----------------------------------------------------------------------------------------------
    655
    656				     end Start
Turbo Assembler	 Version 4.1	    02/15/26 23:52:40	    Page 13
Symbol Table




Symbol Name			  Type	 Value

??DATE				  Text	 "02/15/26"
??FILENAME			  Text	 "frame	  "
??TIME				  Text	 "23:52:39"
??VERSION			  Number 040A
@32BIT				  Text	 0
@@COUNTISZERO			  Near	 DGROUP:012D
@@END				  Near	 DGROUP:0325
@@END				  Near	 DGROUP:03C4
@@GETNUMOFSTRINGS		  Near	 DGROUP:0121
@@LESS10_1			  Near	 DGROUP:03AD
@@LESS10_2			  Near	 DGROUP:03C2
@@NEXT				  Near	 DGROUP:01A0
@@NEXTELEM			  Near	 DGROUP:0231
@@NEXTELEM			  Near	 DGROUP:0243
@@NEXTSTR			  Near	 DGROUP:01B2
@@NOTNEWSTRING			  Near	 DGROUP:013A
@@PRINTFBYTE			  Near	 DGROUP:01ED
@@SHORTSTRING			  Near	 DGROUP:0135
@@SIMPLECHOICE1			  Near	 DGROUP:0263
@@SIMPLECHOICE2			  Near	 DGROUP:027B
@@SIMPLECHOICE3			  Near	 DGROUP:028D
@@SIMPLECHOICE4			  Near	 DGROUP:02AB
@@SIMPLECHOICE5			  Near	 DGROUP:02C3
@@SIMPLECHOICE6			  Near	 DGROUP:02D5
@@SIMPLECHOICE7			  Near	 DGROUP:02EC
@@SIMPLECHOICE8			  Near	 DGROUP:0312
@@SIMPLEMODE			  Near	 DGROUP:034E
@CODE				  Text	 DGROUP
@CODESIZE			  Text	 0
@CPU				  Text	 0101H
@CURSEG				  Text	 _TEXT
@DATA				  Text	 DGROUP
@DATASIZE			  Text	 0
@FILENAME			  Text	 FRAME
@INTERFACE			  Text	 000H
@MODEL				  Text	 1
@STACK				  Text	 DGROUP
@WORDSIZE			  Text	 2
ALREADYMAXLEN			  Near	 DGROUP:0142
CONTINUE			  Near	 DGROUP:0111
ENDOFSTRING			  Near	 DGROUP:011E
GETFRAMECOLOR			  Near	 DGROUP:0395
GETFRAMEVIDEOMEMORYOFFSET	  Near	 DGROUP:01C3
GETMESSAGEPARAMS		  Near	 DGROUP:011F
GETVIDEOMEMORYVERTICALOFFSET	  Near	 DGROUP:0143
HASHSYMBOLSTRLEN		  Near	 DGROUP:010F
INITREGS			  Near	 DGROUP:0326
MAIN				  Near	 DGROUP:0100
MYPUTS				  Near	 DGROUP:0194
PRINTFCENTREDSTRING		  Near	 DGROUP:0159
PRINTFFRAME			  Near	 DGROUP:03C5
PRINTFFRAMEBACKGROUND		  Near	 DGROUP:01F7
PRINTFFRAMEBACKGROUNDSTRING	  Near	 DGROUP:01ED
PRINTFFRAMEFOREGROUND		  Near	 DGROUP:024B
Turbo Assembler	 Version 4.1	    02/15/26 23:52:40	    Page 14
Symbol Table



PRINTFFRAMESTR			  Near	 DGROUP:0203
PRINTFMESSAGE			  Near	 DGROUP:0334
PRINTHORIZONTALSTRING		  Near	 DGROUP:0227
PRINTINTERNALFRAME		  Near	 DGROUP:035B
PRINTVERTICALSTRING		  Near	 DGROUP:0239
PUTCOMMANDLINEMESSAGE		  Near	 DGROUP:01AF
START				  Near	 DGROUP:0100

Groups & Segments		  Bit Size Align  Combine Class

DGROUP				  Group
  _DATA				  16  0000 Word	  Public  DATA
  _TEXT				  16  03CF Word	  Public  CODE
